<?xml version="1.0" encoding="UTF-8" ?>
<project name="OwnTaskExample" default="compile" basedir=".">

	<taskdef classname="anttasks.D" name="D" />
	
	<property name="compiler.dir" value="/opt/dmd" />
	<property name="compiler.type" value="dmd-linux" />
	<property name="tango.dir" value="${user.home}/tango" />
	<property name="tango.examples.dir" value="${tango.dir}/example" />
	<property name="tango.examples.hello" value="${tango.examples.dir}/hello" />
	
	<target name="resgen" >
		<BinToD
			file="t.d"
			fqn="t"
		>
			<resource file="src/anttasks/BinToD.java" id="bintod" variable="bintod" version="all" />
		</BinToD>
	</target>	
	
	<target name="compile" >
		
		<D 
		  type        = "${compiler.type}"
		  mode        = "executable"
		  compilerdir = "${compiler.dir}"
		  destfile    = "${tango.examples.hello}"
		  cleanup     = "true"
		>
			<version value="Posix" />
			
			<!-- The main modules -->
			<mainmodules>
				<fileset file="${tango.examples.hello}.d"/>
			</mainmodules>
			
			<!-- Modules for compilation and linking, if imported -->
			<includemodules>
				<dirset file="${tango.examples.dir}" />
				<dirset file="${tango.dir}" />
			</includemodules>

			<!-- Imported modules, only for declarations, no compile/link (libs) -->
			<includepath>
			</includepath>
			
			<linklib type="static"  name="/usr/lib/libphobos.a" />
			<linklib type="dynamic" name="c" />
			<linklib type="dynamic" name="phobos" />
			<linklib type="dynamic" name="pthread" />
			<linklib type="dynamic" name="m" />			
		</D>
	</target>
</project>


