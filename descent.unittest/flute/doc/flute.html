
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>org.dsource.descent.unittests.flute</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("org.dsource.descent.unittests.flute");</script>
	<table class="content">
		<tr><td id="docbody"><h1>org.dsource.descent.unittests.flute</h1><!-- Generated by Ddoc from ..\src\org\dsource\descent\unittests\flute.d -->
<b>Summary:</b><br>
Flute is an interactive tool for executing D unit tests. It is based on Thomas
 Kuehne's <a href="http://flectioned.kuehne.cn/#unittest">UnittestWalker</a>. Like
 UnittestWalker, it requires <a href="http://flectioned.kuehne.cn">Flectioned</a> to work
 correctly, and right now is only compatible with D version 1.x. It extends
 UnittestWalker by providing an interactive (stdin/stdout-based) way to find and
 execute unit tests.
<br><br>

 However, while 
<span class="currsymbol">flute</span>
<script>explorer.outline.addDecl('flute');</script>

 can be used interactively, it is mainly
 designed to be extended by automated testing tools, such as
 <a href="http://www.dsource.org/projects/descent">descent.unittest</a> or build tools,
 and hopefully be integrated into a project like CruiseControl, etc. It also allows
 for execution of tests one at a time or execution of selected tests, which makes
 test automation more versatile (especially if running all the tests takes a long
 time.)

<br><br>
<b>Usage:</b><br>
Flute must be statically linked against an application, just like UnittestWalker.
 TODO - more here.

<br><br>
<b>Definitions:</b><br>
<ul>   <li>A "line" is any number of ASCII characters (that may contain CR, LF or a
        CRLF pair, although they will only do so if the host program uses
        them, for example in the text for an assert() statement) followed by a
        CRLF pair.</li>
    <li>A "prompt" is the characters "&gt; " (greater-than, space), following the end
        of a line, after which no more will be written to standard output. The
        program will read a single line from standard input (a line in this
        case is defined by the properties of the host system).</li></ul>

<br><br>
<b>Interface:</b><br>
The interface is well-defined. That is, while it is designed to be human-
 readable, it is fully specified and can hopefully be processed by automated
 testing tools. The interface may change between versions.
<br><br>

 When the program is executed, one or more lines containing version information
 (so far in an unspecified format) will be displayed, followed by a prompt. At
 this prompt, any of the following commands can be run: <ul>    <li><b>r [test signature]</b> -
        (A lowercase r, followed by a space, followed by the
        signature of a test). Will run the specified test and print the
        results to stdout. See "test signature specification" for the
        specification of what the test signatures will look like. See "test
        result specification" for a specification of what the results will
        look like. After running the test, a prompt will be displayed for
        entry of another command.</li>
     <li><b>h</b> -
        (A lowercase h alone on a line). Will display an unspecified help message
        (which is an unspecified number of lines) followed by a prompt for a new
        command.</li>
     <li><b>l</b> -
        (A lowercase l alone on a line). Will list the signatures of all the
        tests in the application, followed by a prompt for a new command. The tests
        will be listed one signature per line.</li>
     <li><b>a</b> -
        (An a alone on a line). Will execute all the tests in the
        application. For each test, it will write a line containing "Running: "
        (without the quotes), then the signature of the test being run on a
        line. Then it will write the results of a test. After running all the
        tests, a line containing "SUMMARY: " will be written, then all of the following
        lines&#58 "PASSED: #/#", "FAILED: #/#", "ERROR: #/#", each preceded by
        two spaces, where the first number sign in a line is replaced by the number
        of tests that met that condition, and the second in each line is replaced
        by the total number of executed tests. Any tests that caused an internal
        error will not be reported in any of the three categories, nor will they be
        included in the total.</li>
     <li><b>x</b> -
        (An x alone on a line). Will exit the program.</li>
 </ul>

<br><br>
<b>Test Signature Specification:</b><br>
TODO - this.

<br><br>
<b>Test Result Specification:</b><br>
After a test is run, there are four possible results: <ul>   <li>The test could succeed, in which case a line containing "<b>PASSED</b>" will be
       printed on a line.</li>
    <li>The test could fail an assertion. A line containing "<b>FAILED</b>" will be printed,
       followed by the stack trace of the AssertionFailedException.</li>
    <li>The test could throw an exception. A line containing "<b>ERROR</b>" will be printed,
       followed by the stack trace of the exception. The main rationale for
       treating test failures differently than exceptions is to allow automated
       tools to track failures vs. error conditions. However, the tool can't
       differentiate between assertions failed in the tests and assertions failed
       in the main program body, so a "<b>FAILED</b>" message can mean either.</li>
    <li>An internal error could occur with the test runner (for example, the test is
       not found). In this case, a human-readable message that does not begin with
       "<b>PASSED</b>", "<b>FAILED</b>" or "<b>ERROR</b>" will be printed on a single line.
       If the test is not found, the message will be "Test [test signature] not found",
       where "[test signature]" will be replaced with the signature of the test.
       Other error messages may appear and are unspecified.</li>
 </ul>

<br><br>
<b>Stack Trace Specification:</b><br>
The test runner has support for Flectioned's TracedException, but will work
 correctly even if the thrown exception is not a TracedException. The stack trace
 will begin with a line containing the name of the thrown exception. If the
 exception has a message, this will be followed by ": " and then the exception
 message.
<br><br>

 If the exception is a subclass of TracedException, this will be followed by the
 actual stack trace of the exception. Each line of the stack trace will begin with
 three spaces, which will allow stack traces to be easily visually parsed
 from the surrounding information and dealt with in automated tools.
<br><br>

 Each line of the stack trace represents a stack frame that was executing when the
 exception was thrown. The stack frames will be reported in reverse order (the
 "unwinding" of the stack). TODO - finish this.

<br><br>
<b>Authors:</b><br>
Robert Fraser (fraserofthenight@gmail.com)
<br><br>
<b>Version:</b><br>
0.1

<br><br>
<b>License:</b><br>
Copyright (c) 2007 Robert Fraser (fraserofthenight@gmail.com)

<br><br>

 All rights reserved.
<br><br>

 Redistribution and use in source and binary forms, with or without
 modification, is permitted provided that the following conditions are met:
<br><br>

 1. Redistributions of source code must retain the above copyright notice,
    this list of conditions and the following disclaimer.
<br><br>

 2. Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the
    documentation and/or other materials provided with the distribution.
<br><br>

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 POSSIBILITY OF SUCH DAMAGE.
 
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl">void 
<span class="currsymbol">fluteMain</span>
<script>explorer.outline.addDecl('fluteMain');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Main flute entry point. This will be called during static construction, and
 should, in turn, begin execution of the program.
 
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Wed Nov 28 06:41:19 2007

		</td></tr>
	</table>
</div>
<script>
	explorer.packageExplorer.addModule("org.source.descent.unittests.flute");</script>
</body></html>


